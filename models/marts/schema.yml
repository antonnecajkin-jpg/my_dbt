version: 2

models:
  - name: simple_enrollments
    description: "Отчет: какие пользователи на какие курсы записаны"
    columns:
      - name: user_id
        description: "ID пользователя"
      - name: user_name
        description: "Имя пользователя"
      - name: course_name
        description: "Название курса, на который записан пользователь"

  - name: business_report
    description: "Бизнес-отчет: статистика по курсам и студентам"
    columns:
      - name: course_name
        description: "Название курса"
      - name: category_ru
        description: "Категория курса"
      - name: total_students
        description: "Количество уникальных студентов"
      - name: total_enrollments
        description: "Количество всех записей"
      - name: students_18_30
        description: "Количество студентов в возрасте 18-30"
      - name: students_31_50
        description: "Количество студентов в возрасте 31-50"
      - name: first_enrollment
        description: "Дата первой записи на курс"
      - name: last_enrollment
        description: "Дата последней записи на курс"
      - name: avg_enrollments_per_course
        description: "Среднее количество записей на курс"

  - name: daily_views_incremental
    description: "Инкрементальная модель: просмотры уроков пользователями"
    columns:
      - name: id
        description: "Уникальный идентификатор просмотра"
        tests:
          - not_null
          - unique
      - name: user_id
        description: "ID пользователя"
        tests:
          - not_null
      - name: lesson_id
        description: "ID урока"
        tests:
          - not_null
      - name: viewed_at
        description: "Дата и время просмотра урока"
        tests:
          - not_null

  - name: lesson_popularity_summary_source
    description: "Отчет: популярность уроков по просмотрам и уникальным пользователям"
    columns:
      - name: lesson_id
        description: "ID урока"
        tests:
          - not_null
          - unique
      - name: lesson_title
        description: "Название урока"
        tests:
          - not_null
      - name: course_id
        description: "ID курса"
        tests:
          - not_null
      - name: course_title
        description: "Название курса"
        tests:
          - not_null
      - name: total_views
        description: "Общее количество просмотров урока"
        tests:
          - not_null
      - name: unique_users
        description: "Количество уникальных пользователей, посмотревших урок"
        tests:
          - not_null
      - name: first_view
        description: "Дата и время первого просмотра"
      - name: last_view
        description: "Дата и время последнего просмотра"
